# ğŸ¯ ãƒãƒ§ãƒƒãƒˆãƒãƒƒã‚¿ AI

**Google Cloud Vertex AI Multimodal Live API ã‚’ä½¿ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°åˆ†æã‚·ã‚¹ãƒ†ãƒ **

[![Cloud Run](https://img.shields.io/badge/Google%20Cloud-Run-4285f4.svg)](https://cloud.google.com/run)
[![Next.js](https://img.shields.io/badge/Next.js-14-black.svg)](https://nextjs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104-009688.svg)](https://fastapi.tiangolo.com/)
[![Vertex AI](https://img.shields.io/badge/Vertex%20AI-Live%20API-4285f4.svg)](https://cloud.google.com/vertex-ai)


## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

![ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./architecture.drawio.svg)

## ğŸŒŸ æ©Ÿèƒ½æ¦‚è¦

- ğŸ¤ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°åˆ†æ**: Vertex AI Multimodal Live APIã«ã‚ˆã‚‹é«˜ç²¾åº¦ãªéŸ³å£°è§£æ
- ğŸš¨ **AIä»‹å…¥ã‚·ã‚¹ãƒ†ãƒ **: å±é™ºãªç™ºè¨€ã®æ¤œå‡ºã¨è‡ªå‹•è­¦å‘Š
- ğŸ’¬ **ãƒãƒ£ãƒƒãƒˆåˆ†æ**: ä¼šè©±ã®å‚¾å‘åˆ†æã¨ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ğŸŒ **Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: ç¾ã—ã„ãƒ¢ãƒ€ãƒ³UI with Next.js
- â˜ï¸ **ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–**: Google Cloud Runå¯¾å¿œ
- ğŸ”„ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: WebSocketã«ã‚ˆã‚‹åŒæ–¹å‘é€šä¿¡

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd communication

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
cd adk-backend
pip install -r requirements.txt
python start_server.py

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹• (åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«)
cd frontend
npm install
npm run dev
```

### Cloud Runãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
docker build -t gcr.io/YOUR_PROJECT_ID/safecomm-ai .

# 2. ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒƒã‚·ãƒ¥  
docker push gcr.io/YOUR_PROJECT_ID/safecomm-ai

# 3. service.yamlã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’å®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆ
# PROJECT_ID, REGION, PROJECT_NUMBERã‚’ç·¨é›†

# 4. Cloud Runã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run services replace service.yaml --region=us-central1
```

## ğŸ“‹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    WebSocket    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   Backend       â”‚
â”‚   (Next.js)     â”‚                 â”‚   (FastAPI)     â”‚
â”‚   Port: 3000    â”‚                 â”‚   Port: 8080    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   Vertex AI     â”‚
                                  â”‚   Live API      â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cloud Runçµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloud Run Service                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚             Docker Container                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   FastAPI    â”‚  â”‚            Next.js               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (Port 8080) â”‚  â”‚          (Port 3000)             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
communication/
â”œâ”€â”€ ğŸ“„ README.md                          # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ ğŸ“„ VERTEX_AI_IMPLEMENTATION.md        # å®Ÿè£…ãƒ»APIä»•æ§˜è©³ç´°
â”œâ”€â”€  Dockerfile                         # ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
â”œâ”€â”€ âš™ï¸ service.yaml                       # Cloud Run ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ frontend/                          # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                          # App Router
â”‚   â”‚   â”œâ”€â”€ components/                   # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/                   # éŸ³å£°åˆ†æUI
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/                    # ãƒãƒ£ãƒƒãƒˆåˆ†æUI
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                    # èªè¨¼UI
â”‚   â”‚   â”‚   â””â”€â”€ layout/                  # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ lib/                         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ next.config.ts                   # Next.jsè¨­å®š
â”‚
â”œâ”€â”€ ğŸ adk-backend/                       # Python ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ main.py                          # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ requirements.txt                 # Pythonä¾å­˜é–¢ä¿‚
â”‚   â”œâ”€â”€ agents/                          # ADK ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ message_analyzer_orchestrator.py
â”‚   â”‚   â””â”€â”€ chat_analysis_agent.py
â”‚   â””â”€â”€ saved_audio/                     # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
â”‚
â””â”€â”€ ğŸ“š docs/                             # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ functional-requirements.md
    â”œâ”€â”€ agent-design.md
    â””â”€â”€ chat-system-design.md
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 14** - React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript** - å‹å®‰å…¨æ€§
- **Tailwind CSS** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Web Audio API** - éŸ³å£°å‡¦ç†

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰  
- **FastAPI** - Python Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Google ADK** - Agent Development Kit
- **WebSockets** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- **Vertex AI Live API** - éŸ³å£°åˆ†æ

### ã‚¤ãƒ³ãƒ•ãƒ©
- **Google Cloud Run** - ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œç’°å¢ƒ
- **Artifact Registry** - ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª
- **Docker** - ã‚³ãƒ³ãƒ†ãƒŠåŒ–
- **service.yaml** - Cloud Run ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. éŸ³å£°ç›£è¦–æ©Ÿèƒ½

1. Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹
2. `/audio` ãƒšãƒ¼ã‚¸ã«ç§»å‹•
3. ã€ŒéŸ³å£°ç›£è¦–ã‚’é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§éŸ³å£°åˆ†æçµæœã‚’ç¢ºèª

### 2. ãƒãƒ£ãƒƒãƒˆåˆ†ææ©Ÿèƒ½

1. `/chat` ãƒšãƒ¼ã‚¸ã«ç§»å‹•
2. ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›
3. ã€Œåˆ†æå®Ÿè¡Œã€ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ
4. è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèª

## ğŸ“Š API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### REST API
- `GET /health` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `POST /api/analyze-message` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æ
- `POST /api/chat-analysis` - ãƒãƒ£ãƒƒãƒˆåˆ†æ

### WebSocket API
- `/ws/audio-analysis` - éŸ³å£°åˆ†æWebSocket
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã¯ [VERTEX_AI_IMPLEMENTATION.md](./VERTEX_AI_IMPLEMENTATION.md) ã‚’å‚ç…§

## ğŸ”§ é–‹ç™ºè€…å‘ã‘

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º
cd adk-backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn main:app --reload

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º
cd frontend
npm install
npm run dev
```

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

é–‹ç™ºç’°å¢ƒã§ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½:
- ãƒ‡ãƒ¢ç”¨ã®æ–‡å­—èµ·ã“ã—è¿½åŠ ãƒœã‚¿ãƒ³
- è­¦å‘Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³  
- è©³ç´°ãªã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **WebSocketæ¥ç¶šã‚¨ãƒ©ãƒ¼**
   - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ç¢ºèª
   - ãƒãƒ¼ãƒˆ8080ã®åˆ©ç”¨å¯èƒ½æ€§ç¢ºèª

2. **ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦** 
   - ãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã§ãƒã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯
   - HTTPSç’°å¢ƒã§ã®å®Ÿè¡Œæ¨å¥¨

3. **Google Cloudèªè¨¼ã‚¨ãƒ©ãƒ¼**
   - `gcloud auth application-default login`å®Ÿè¡Œ
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§AI Platform APIæœ‰åŠ¹åŒ–ç¢ºèª

è©³ç´°ã¯ [VERTEX_AI_IMPLEMENTATION.md](./VERTEX_AI_IMPLEMENTATION.md) ã‚’å‚ç…§

## ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- ğŸ“– [å®Ÿè£…ãƒ»APIä»•æ§˜è©³ç´°](./VERTEX_AI_IMPLEMENTATION.md)
-  [æ©Ÿèƒ½è¦ä»¶](./docs/functional-requirements.md)
- ğŸ¤– [ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­è¨ˆ](./docs/agent-design.md)

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. Pull Requestã‚’ä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [Vertex AI Multimodal Live API](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/multimodal-live)
- [Google ADK Documentation](https://googleapis.github.io/python-genai/)
- [Cloud Run Documentation](https://cloud.google.com/run/docs)
- [Next.js Documentation](https://nextjs.org/docs)

---

ğŸ‰ **Ready to deploy?** Edit `service.yaml` with your project details and run `gcloud run services replace service.yaml --region=us-central1`!
